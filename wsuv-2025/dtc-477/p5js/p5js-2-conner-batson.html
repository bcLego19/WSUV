
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Conner Batson - Train Track Display</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    body {
      margin: 0;
    }
    canvas {
      display: block;
      margin: 5% auto;
    }

        /* General Class Styles */
        .navbar {
            background-color: #333;
            overflow: hidden;
            position: relative;
            width: 100%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .navbar a {
            color: white;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 17px;
            display: block;
            text-align: center;
        }

        .navbar a:hover {
            background-color: #ddd;
            color: black;
        }

        .navbar-brand {
            float: left;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 20px;
            font-weight: bold;
        }

        .navbar-toggler {
            display: block;
            background-color: transparent;
            border: none;
            color: white;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            position: absolute;
            right: 0;
            top: 0;
        }

        .navbar-toggler:hover {
            background-color: #555;
        }

        .navbar-menu {
            display: none;
            flex-direction: column;
            background-color: #333;
            position: fixed;
            top: 50px;
            right: 0;
            left: 0;
            z-index: 1;
            overflow-y: auto;
            max-height: calc(100vh - 50px);
        }

        .navbar-menu a {
            padding: 14px 16px;
            text-align: center;
        }

        .navbar-menu a:hover {
            background-color: #555;
        }

        .main-content {
            padding: 20px;
            margin-top: 60px;
            text-align: left;
            width: 100%;
            box-sizing: border-box;
        }

        /* ID Styles */
        #refreshButton {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }

        #refreshButton:hover {
            background-color: #367c39;
        }

        /* Media Queries */
        @media screen and (max-width: 600px) {
            .navbar a {
                display: none;
            }

            .navbar-menu {
                display: none;
                position: fixed;
            }

            .navbar-menu.active {
                display: flex;
                flex-direction: column;
            }
        }

        #refreshButton {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        #refreshButton:hover {
            background-color: #367c39;
        }
  </style>
</head>
<body>
  <nav class="navbar">
        <a href="#" class="navbar-brand">Conner Batson 4-11-2025</a>
        <button class="navbar-toggler" id="navbarToggler">
            <i class="fa fa-bars"></i>
        </button>
        <div class="navbar-menu" id="navbarMenu">
            <a href="./index.html">Home</a>
            <a href="./p5js-conner-batson.html">P5js 1</a>
            <a href="./p5js-2-conner-batson.html">P5js 2</a>
            <a href="./p5js-3-conner-batson.html">P5js 3</a>
            <a href="./p5js-4-conner-batson.html">P5js 4</a>
            <a href="./p5js-5-conner-batson.html">P5js 5</a>
            <a href="./p5js-6-conner-batson.html">P5js 6</a>
            <a href="./p5js-7-conner-batson.html">P5js 7</a>
        </div>
    </nav>

  <h1>Train Track Controls</h1>

  <div>
    <label for="canvasHeightInput">Canvas Height:</label>
    <input type="number" id="canvasHeightInput" value="800" min="800" max="3200">
  </div>

  <div>
    <label for="scrollSpeedSlider">Scroll Speed:</label>
    <input type="range" id="scrollSpeedSlider" min="0.1" max="5" step="0.1" value="1">
    <span id="scrollSpeedValue">1</span>
  </div>

  <div>
    <label for="tieSpacingInput">Tie Spacing:</label>
    <input type="number" id="tieSpacingInput" value="50">
  </div>

  <div>
    <label for="stationIntervalInput">Station Interval:</label>
    <input type="number" id="stationIntervalInput" value="150">
  </div>

  <button id="resetButton">Reset Animation</button>

  <div id="canvasContainer"></div>

  <script>
    //  Navbar Code
const navbarToggler = document.getElementById('navbarToggler');
const navbarMenu = document.getElementById('navbarMenu');
console.log(navbarToggler);
console.log(navbarMenu);

navbarToggler.addEventListener('click', () => {
  console.log("clicked on navbarToggler");
    if (navbarMenu.style.display === 'none' || navbarMenu.style.display === '') {
        navbarMenu.style.display = 'block';
    } else {
        navbarMenu.style.display = 'none';
    }
});

// P5js code
// Canvas dimensions
var canvasWidth = 300;
var canvasHeight = 800;
var canvas; // To hold the p5.js canvas element

// Train track properties
var trackXCenter;
var trackSpacing = 20;
var trackColor;
var trackThickness = 5;
var trackLength;

// Rail tie properties
var tieWidth = trackSpacing * 2;
var tieHeight = 3;
var tieColor;
var tieSpacing = 50;

// Train station properties
var stationInterval = 150;
var stationWidth = 40;
var stationHeight = 30;
var stationColor;
var stationOffset = 50;

// Track barrier properties
var barrierWidth = 50;
var barrierHeight = 10;
var barrierColor;
var barrierOffset = 20;

// Scrolling variables
var scrollSpeed = 1;
var scrollOffset = 0;

// HTML control elements
var canvasHeightInput;
var scrollSpeedSlider;
var scrollSpeedValueSpan;
var tieSpacingInput;
var stationIntervalInput;
var resetButton;

function setup() {
  // Get reference to the canvas height input
  canvasHeightInput = select('#canvasHeightInput');

  // Create the canvas with the initial height
  canvas = createCanvas(canvasWidth, parseInt(canvasHeightInput.value()));
  canvas.parent('canvasContainer');

  trackXCenter = canvasWidth / 2;
  trackColor = color(100);
  tieColor = color(80);
  stationColor = color(150);
  barrierColor = color(200, 0, 0);
  trackLength = canvasHeight - 2 * barrierOffset;

  // Get references to the HTML elements
  scrollSpeedSlider = select('#scrollSpeedSlider');
  scrollSpeedValueSpan = select('#scrollSpeedValue');
  tieSpacingInput = select('#tieSpacingInput');
  stationIntervalInput = select('#stationIntervalInput');
  resetButton = select('#resetButton');

  // Add event listeners to the controls
  canvasHeightInput.changed(updateCanvasHeight);
  scrollSpeedSlider.changed(updateScrollSpeed);
  tieSpacingInput.changed(updateTieSpacing);
  stationIntervalInput.changed(updateStationInterval);
  resetButton.mousePressed(resetAnimation);

  // Initially display the scroll speed value
  scrollSpeedValueSpan.html(scrollSpeed);

  // Enable continuous looping for scrolling
  loop();
}

function draw() {
  background(240);

  var drawStartY = -scrollOffset;
  var drawEndY = canvasHeight - scrollOffset;

  // Draw the train tracks
  stroke(trackColor);
  strokeWeight(trackThickness);
  line(trackXCenter - trackSpacing / 2, barrierOffset, trackXCenter - trackSpacing / 2, canvasHeight - barrierOffset);
  line(trackXCenter + trackSpacing / 2, barrierOffset, trackXCenter + trackSpacing / 2, canvasHeight - barrierOffset);
  noStroke();

  // Draw the rail ties
  fill(tieColor);
  var tieY = barrierOffset;
  var currentTieSpacing = parseInt(tieSpacingInput.value()); // Get current value
  while (tieY < canvasHeight - barrierOffset) {
    rect(trackXCenter - tieWidth / 2, tieY - tieHeight / 2, tieWidth, tieHeight);
    tieY += currentTieSpacing;
  }

  // Draw the train stations
  fill(stationColor);
  var stationY = barrierOffset + parseInt(stationIntervalInput.value()); // Get current value
  var stationIndex = 0;

  while (stationY < canvasHeight - barrierOffset) {
    var stationX;
    if (stationIndex % 2 === 0) {
      stationX = trackXCenter - stationOffset - stationWidth;
    } else {
      stationX = trackXCenter + stationOffset;
    }
    rect(stationX, stationY - stationHeight / 2, stationWidth, stationHeight);
    stationY += parseInt(stationIntervalInput.value()); // Use current value
    stationIndex++;
  }

  // Draw the track barriers
  fill(barrierColor);
  rect(trackXCenter - barrierWidth / 2, barrierOffset - barrierHeight / 2, barrierWidth, barrierHeight);
  rect(trackXCenter - barrierWidth / 2, canvasHeight - barrierOffset - barrierHeight / 2, barrierWidth, barrierHeight);

  // Update the scroll offset for the next frame
  scrollOffset += scrollSpeed;
  if (scrollOffset > trackLength + parseInt(stationIntervalInput.value())) {
    scrollOffset = 0;
  }
}

function updateCanvasHeight() {
  var newHeight = parseInt(canvasHeightInput.value());
  resizeCanvas(canvasWidth, newHeight);
  canvasHeight = newHeight; // Update the global variable

  // Recalculate variables that depend on canvas height
  trackLength = canvasHeight - 2 * barrierOffset;
  // If you were using trackYCenter for horizontal tracks, you'd update it here too:
  // trackYCenter = canvasHeight / 2;

  // Reset scroll offset when height changes to prevent issues
  scrollOffset = 0;
}

function updateScrollSpeed() {
  scrollSpeed = parseFloat(scrollSpeedSlider.value());
  scrollSpeedValueSpan.html(scrollSpeed);
}

function updateTieSpacing() {
  // The tie spacing will be read directly from the input in the draw function
}

function updateStationInterval() {
  // The station interval will be read directly from the input in the draw function
}

function resetAnimation() {
  scrollSpeedSlider.value('1');
  scrollSpeed = 1;
  scrollSpeedValueSpan.html(scrollSpeed);
  tieSpacingInput.value('50');
  stationIntervalInput.value('150');
  scrollOffset = 0;
}
  </script>
</body>
</html>
